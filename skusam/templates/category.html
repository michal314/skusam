{%extends 'base.html' %}

{% block body_block %}
    <div class="hero-unit">
      <h1>{{ category_name }}</h1>
    </div>
        
     <ul> 
        <h2>Articles</h2> 
         
          {% if category.article_set.all %}  
            {% for artic in articlesss%}
            <li><a href="{% url "article-view" pk=artic.id  category_name_url=category.name %}">{{ artic.title }}</a>
               
            </li>
            {% endfor %} 
 
          <div class="pagination">
            <span class="step-links">
               {% if articlesss.has_previous %}
                 <a href= "?page={{ articlesss.previous_page_number }}">previous page &lt;&lt; </a>
               {% endif %}
 
               <span class="current">
                 &nbsp;Page {{ articlesss.number }} of {{articlesss.paginator.num_pages }}
               </span>
 
               {% if articlesss.has_next %}
                 <a href="?page={{ articlesss.next_page_number }}"> &gt;&gt; next page</a> 
               {% endif %}
            </span>
           </div>
                           
          {% else %}
             <strong>No articles currently in category: {{category_name}}.</strong>
          {% endif %}
    </ul>



     <ul>        
            {% if pages %} <h2>Useful links</h2>
            <ul>
                {% for page in pages %}
                <li><a href="{{ page.url }}">{{ page.title }}</a></li>
                {% endfor %}
            </ul>
            {% else %}
                <strong>No pages currently in category: {{category_name}}.</strong>
            {% endif %}
     </ul>
{% endblock %}

{% block sidebar %}
<UL class="nav nav-list">
  <LI class="nav-header"><h3>Top Articles </h3></LI>
       
        {% if category.article_set.all %}  
          <ul>  
                {% for artic in article_list%}
                <li><a href="{% url "article-view" pk=artic.id  category_name_url=category.name %}">{{ artic.title }} </a></li>
                {% endfor %}
        </ul>
        {% else %}
        <strong>No article at present.</strong>
        {% endif %}
</UL>


<UL class="nav nav-list"> </UL>
  <LI class="nav-header"><h3>Options </h3></LI>
  
  {% for groups in user.groups.filter %}
        {% for perm in groups.permissions.filter %}
           {% if 'Can add article' == perm.name %}
           
      <ul><h4><strong>with permission </strong></h4>
   
       <form action="{% url "article-new"  category_name_url=category.name %}" method='get'>
          <button type='submit' class="btn btn-primary"> add new article </button>
        </form>
       </ul> 
          {% endif%}

      {% endfor %}
 
{% endfor %}
 
  

{% endblock %}